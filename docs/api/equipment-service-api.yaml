openapi: 3.0.3
info:
  title: Equipment Service API
  description: |
    Equipment Monitoring and Management Microservice API
    
    This service provides comprehensive equipment management capabilities including:
    - Connected pump monitoring and control
    - Connected sensor data collection
    - Real-time telemetry and status updates
    - Maintenance scheduling and tracking
    - Equipment reports and analytics
    
    ## Authentication
    All endpoints require JWT Bearer token authentication via API Gateway.
    Farmer ID must be provided in the `X-Farmer-Id` header for authorization.
    
    ## Base URL
    Production: `https://api.farmmonitoring.com/api`
    Development: `http://localhost:8080/api`
    
  version: 1.0.0
  contact:
    name: Farm Monitoring Support
    email: support@farmmonitoring.com
  license:
    name: MIT License
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:8080
    description: Local development server (via API Gateway)
  - url: http://localhost:8082
    description: Direct service access (bypassing gateway)
  - url: https://api.farmmonitoring.com
    description: Production server

tags:
  - name: Pumps
    description: Connected pump management operations
  - name: Sensors
    description: Connected sensor management operations

paths:
  /api/pumps:
    post:
      tags:
        - Pumps
      summary: Create a new pump
      description: Create a new connected pump for a farm
      operationId: createPump
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          description: Farmer ID for authorization
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePumpRequest'
            example:
              farmId: 223e4567-e89b-12d3-a456-426614174000
              name: Main Irrigation Pump
              model: AquaPump Pro 3000
              serialNumber: AP3000-2024-001
              installationDate: 2024-01-20
              flowRateMax: 150.5
      responses:
        '201':
          description: Pump created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PumpDTO'
              example:
                id: 323e4567-e89b-12d3-a456-426614174000
                farmId: 223e4567-e89b-12d3-a456-426614174000
                name: Main Irrigation Pump
                model: AquaPump Pro 3000
                serialNumber: AP3000-2024-001
                status: IDLE
                installationDate: 2024-01-20T00:00:00Z
                lastMaintenanceDate: 2024-01-20T00:00:00Z
                nextMaintenanceDate: 2024-07-20T00:00:00Z
                flowRateMax: 150.5
                currentFlowRate: 0.0
                operatingHours: 0
                createdAt: 2024-01-20T10:00:00Z
                updatedAt: 2024-01-20T10:00:00Z
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/pumps/{id}:
    get:
      tags:
        - Pumps
      summary: Get pump by ID
      description: Retrieve a specific pump by its ID
      operationId: getPumpById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Pump found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PumpDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

    put:
      tags:
        - Pumps
      summary: Update pump
      description: Update an existing pump
      operationId: updatePump
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePumpRequest'
            example:
              name: Main Irrigation Pump - Updated
              status: OPERATIONAL
              currentFlowRate: 120.5
      responses:
        '200':
          description: Pump updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PumpDTO'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

    delete:
      tags:
        - Pumps
      summary: Delete pump
      description: Delete a pump
      operationId: deletePump
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Pump deleted successfully
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/pumps/farm/{farmId}:
    get:
      tags:
        - Pumps
      summary: Get pumps by farm
      description: Retrieve all pumps for a specific farm
      operationId: getPumpsByFarm
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Pumps retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagePumpDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/pumps/farm/{farmId}/status/{status}:
    get:
      tags:
        - Pumps
      summary: Get pumps by status
      description: Retrieve pumps filtered by equipment status
      operationId: getPumpsByStatus
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: status
          in: path
          required: true
          schema:
            type: string
            enum: [OPERATIONAL, IDLE, MAINTENANCE, FAULTY, OFFLINE]
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Pumps retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagePumpDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/pumps/farm/{farmId}/operational:
    get:
      tags:
        - Pumps
      summary: Get operational pumps
      description: Retrieve all operational pumps for a farm
      operationId: getOperationalPumps
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Operational pumps retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagePumpDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/pumps/farm/{farmId}/maintenance-overdue:
    get:
      tags:
        - Pumps
      summary: Get pumps with overdue maintenance
      description: Retrieve pumps that have overdue maintenance
      operationId: getPumpsWithOverdueMaintenance
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Pumps with overdue maintenance retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagePumpDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/pumps/{id}/maintenance/schedule:
    post:
      tags:
        - Pumps
      summary: Schedule maintenance
      description: Schedule maintenance for a pump
      operationId: scheduleMaintenance
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MaintenanceRequest'
            example:
              scheduledDate: 2024-07-20T09:00:00Z
              description: Regular 6-month maintenance check
              estimatedDuration: 4
      responses:
        '200':
          description: Maintenance scheduled successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PumpDTO'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/pumps/{id}/maintenance/complete:
    post:
      tags:
        - Pumps
      summary: Complete maintenance
      description: Mark maintenance as completed for a pump
      operationId: completeMaintenance
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: notes
          in: query
          required: false
          description: Maintenance completion notes
          schema:
            type: string
      responses:
        '200':
          description: Maintenance completed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PumpDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/sensors:
    post:
      tags:
        - Sensors
      summary: Create a new sensor
      description: Create a new connected sensor for a farm
      operationId: createSensor
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSensorRequest'
            example:
              farmId: 223e4567-e89b-12d3-a456-426614174000
              name: Soil Moisture Sensor Zone A
              type: SOIL_MOISTURE
              manufacturer: SensorTech Inc.
              model: SMT-500
              serialNumber: SMT500-2024-042
              installationDate: 2024-01-22
      responses:
        '201':
          description: Sensor created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SensorDTO'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/sensors/{id}:
    get:
      tags:
        - Sensors
      summary: Get sensor by ID
      description: Retrieve a specific sensor by its ID
      operationId: getSensorById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Sensor found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SensorDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

    put:
      tags:
        - Sensors
      summary: Update sensor
      description: Update an existing sensor
      operationId: updateSensor
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSensorRequest'
      responses:
        '200':
          description: Sensor updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SensorDTO'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

    delete:
      tags:
        - Sensors
      summary: Delete sensor
      description: Delete a sensor
      operationId: deleteSensor
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Sensor deleted successfully
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/sensors/farm/{farmId}:
    get:
      tags:
        - Sensors
      summary: Get sensors by farm
      description: Retrieve all sensors for a specific farm
      operationId: getSensorsByFarm
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Sensors retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageSensorDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/sensors/farm/{farmId}/type/{type}:
    get:
      tags:
        - Sensors
      summary: Get sensors by type
      description: Retrieve sensors filtered by type
      operationId: getSensorsByType
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: type
          in: path
          required: true
          schema:
            type: string
            enum: [SOIL_MOISTURE, TEMPERATURE, HUMIDITY, PH_LEVEL, LIGHT, WATER_LEVEL]
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Sensors retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageSensorDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/sensors/farm/{farmId}/active:
    get:
      tags:
        - Sensors
      summary: Get active sensors
      description: Retrieve all active sensors for a farm
      operationId: getActiveSensors
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Active sensors retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageSensorDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/sensors/farm/{farmId}/low-battery:
    get:
      tags:
        - Sensors
      summary: Get sensors with low battery
      description: Retrieve sensors with battery level below 20%
      operationId: getSensorsWithLowBattery
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Sensors with low battery retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageSensorDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

  /api/sensors/farm/{farmId}/offline:
    get:
      tags:
        - Sensors
      summary: Get offline sensors
      description: Retrieve sensors that haven't communicated in the last 30 minutes
      operationId: getOfflineSensors
      parameters:
        - name: X-Farmer-Id
          in: header
          required: true
          schema:
            type: string
            format: uuid
        - name: farmId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Offline sensors retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageSensorDTO'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
      security:
        - bearerAuth: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from authentication service

  schemas:
    PumpDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
        farmId:
          type: string
          format: uuid
        name:
          type: string
        model:
          type: string
        serialNumber:
          type: string
        status:
          type: string
          enum: [OPERATIONAL, IDLE, MAINTENANCE, FAULTY, OFFLINE]
        installationDate:
          type: string
          format: date-time
        lastMaintenanceDate:
          type: string
          format: date-time
        nextMaintenanceDate:
          type: string
          format: date-time
        flowRateMax:
          type: number
          format: double
          description: Maximum flow rate in liters per minute
        currentFlowRate:
          type: number
          format: double
          description: Current flow rate in liters per minute
        operatingHours:
          type: integer
          format: int64
          description: Total operating hours
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreatePumpRequest:
      type: object
      required:
        - farmId
        - name
        - model
        - serialNumber
        - installationDate
        - flowRateMax
      properties:
        farmId:
          type: string
          format: uuid
        name:
          type: string
          minLength: 2
          maxLength: 100
        model:
          type: string
          minLength: 2
          maxLength: 100
        serialNumber:
          type: string
          minLength: 5
          maxLength: 50
        installationDate:
          type: string
          format: date
        flowRateMax:
          type: number
          format: double
          minimum: 0.1

    UpdatePumpRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 100
        status:
          type: string
          enum: [OPERATIONAL, IDLE, MAINTENANCE, FAULTY, OFFLINE]
        currentFlowRate:
          type: number
          format: double

    MaintenanceRequest:
      type: object
      required:
        - scheduledDate
        - description
      properties:
        scheduledDate:
          type: string
          format: date-time
        description:
          type: string
          minLength: 5
          maxLength: 500
        estimatedDuration:
          type: integer
          minimum: 1
          description: Estimated duration in hours

    SensorDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
        farmId:
          type: string
          format: uuid
        name:
          type: string
        type:
          type: string
          enum: [SOIL_MOISTURE, TEMPERATURE, HUMIDITY, PH_LEVEL, LIGHT, WATER_LEVEL]
        manufacturer:
          type: string
        model:
          type: string
        serialNumber:
          type: string
        status:
          type: string
          enum: [ACTIVE, INACTIVE, MAINTENANCE, FAULTY]
        installationDate:
          type: string
          format: date-time
        lastReadingDate:
          type: string
          format: date-time
        batteryLevel:
          type: integer
          minimum: 0
          maximum: 100
        currentValue:
          type: number
          format: double
        unit:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateSensorRequest:
      type: object
      required:
        - farmId
        - name
        - type
        - manufacturer
        - model
        - serialNumber
        - installationDate
      properties:
        farmId:
          type: string
          format: uuid
        name:
          type: string
          minLength: 2
          maxLength: 100
        type:
          type: string
          enum: [SOIL_MOISTURE, TEMPERATURE, HUMIDITY, PH_LEVEL, LIGHT, WATER_LEVEL]
        manufacturer:
          type: string
          minLength: 2
          maxLength: 100
        model:
          type: string
          minLength: 2
          maxLength: 100
        serialNumber:
          type: string
          minLength: 5
          maxLength: 50
        installationDate:
          type: string
          format: date

    UpdateSensorRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 100
        status:
          type: string
          enum: [ACTIVE, INACTIVE, MAINTENANCE, FAULTY]
        batteryLevel:
          type: integer
          minimum: 0
          maximum: 100
        currentValue:
          type: number
          format: double

    PagePumpDTO:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/PumpDTO'
        pageable:
          $ref: '#/components/schemas/PageableObject'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        last:
          type: boolean
        first:
          type: boolean

    PageSensorDTO:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/SensorDTO'
        pageable:
          $ref: '#/components/schemas/PageableObject'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        last:
          type: boolean
        first:
          type: boolean

    PageableObject:
      type: object
      properties:
        pageNumber:
          type: integer
        pageSize:
          type: integer
        sort:
          type: object
          properties:
            sorted:
              type: boolean
            unsorted:
              type: boolean

    ErrorResponse:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        status:
          type: integer
        error:
          type: string
        message:
          type: string
        path:
          type: string

  responses:
    BadRequestError:
      description: Invalid request data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            timestamp: 2024-01-20T10:00:00Z
            status: 400
            error: Bad Request
            message: Validation failed - flowRateMax must be greater than 0
            path: /api/pumps

    UnauthorizedError:
      description: Authentication required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            timestamp: 2024-01-20T10:00:00Z
            status: 401
            error: Unauthorized
            message: JWT token is missing or invalid
            path: /api/pumps

    ForbiddenError:
      description: Permission denied
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            timestamp: 2024-01-20T10:00:00Z
            status: 403
            error: Forbidden
            message: You do not have permission to access this farm's equipment
            path: /api/pumps/farm/223e4567-e89b-12d3-a456-426614174000

    NotFoundError:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            timestamp: 2024-01-20T10:00:00Z
            status: 404
            error: Not Found
            message: Pump with ID 323e4567-e89b-12d3-a456-426614174000 not found
            path: /api/pumps/323e4567-e89b-12d3-a456-426614174000

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            timestamp: 2024-01-20T10:00:00Z
            status: 500
            error: Internal Server Error
            message: An unexpected error occurred
            path: /api/pumps
